---
sidebar_position: 1
title: 配置
---

箱子面板是CommandPanels中基于物品交互的主要面板类型。它可以让玩家直观地与物品互动，非常适合游戏菜单、奖励、套装等。

## 概述

箱子面板是最适合玩家与物品交互的界面。这些物品可以触发命令、显示消息或包括有条件地显示和隐藏的逻辑。

玩家也可以在面板中的任何**空槽位**（槽位是空气）**放入他们自己的物品**。但他们**不能移走**面板内定义的物品。如果玩家在关闭面板后物品还留在面板里面，物品会**还给玩家**。

------

## 主要功能

- **物品交互**：物品可以在点击后运行命令、应用条件或展示动画。
- **基于逻辑的可见性**：使用条件控制每个槽位显示哪些物品。
- **动画**：通过定义物品链来平滑地实现物品帧动画。
- **支持玩家物品栏操作**：玩家可以将背包中的物品放进面板中未使用的槽位。
- **动态更新**：面板可设置周期性更新。

------

## 配置选项

### 类型

定义为箱子面板。

```yaml
type: 'inventory'
```

### 标题

面板标题。支持占位符，例如`%player_name%`或`%commandpanels_session_player%`。

```yaml
title: '示例标题'
```

### 条件

玩家必须符合条件才能打开面板。

```yaml
conditions: '%player_name% $HASPERM example.permission'
```

### 打开命令

玩家在游戏中用于打开面板的命令。你可以添加参数，并在面板内通过`%commandpanels_session_<参数>%`来引用参数。例如，若打开命令设置为`example player`，执行`/example Halogly`会打开面板，并且占位符`%commandpanels_session_player%`会返回“Halogly”。

```yaml
command: 'ban player'
```

### 命令别名

定义其他也可以打开此面板的等效命令。在主命令中定义的参数同样适用这些别名。因此，如果你定义了`command: 'ban player'`，那么执行`/ban Player`、`/mute Player`、`/kick Player`或`/warn Player`都会以同样的方式打开这个面板。

```yaml
aliases: [ 'mute','kick','warn' ]
```

### 运行命令

当面板打开后要自动执行的一系列命令。

```yaml
commands:
  - '[msg] 已打开面板'
  - '[session] set player Halogly'
```

### Floodgate

如果玩家是**基岩版**（通过GeyserMC实现连接），此选项可以将他重定向到兼容的基岩面板。

```yaml
floodgate: 'floodgate_panel_example'
```

### 更新延迟

设置面板的更新频率（以刻为单位）：

- `0` = 无更新（静态面板）
- `>0` = 以刻为单位更新面板的内容和动画（20刻 = 1秒）

注意：这不会重新运行逻辑条件，只会更新物品的显示隐藏和动画效果。

```yaml
update-delay: 20
```

### 行数

设置面板槽位的行数。接受：

- 从`1`到`6`的数字（每行9个槽位）
- 或者，对于形状布局，可以使用自定义的物品栏类型，例如漏斗`HOPPER`

```yaml
rows: 1
```

------

## 槽位配置

`layout:`部分定义面板中每个槽位要显示哪些物品。

- 槽位编号从`0`到`53`，具体取决于面板行数或容器类型。
- 在每个槽位编号下，你可以定义**多个物品名称**。
- 插件会按照`从上到下`的顺序检查该槽位编号下每个物品的条件，**第一个符合条件的物品**会被显示在面板中。

### 填充

这个特殊的槽位键会用指定的默认物品填充所有的**空槽位**。`fill:`支持条件逻辑，以此可以实现动态化的占位物品。

```yaml
layout:
  fill:
    - '填充的物品名称'
```

------

## 物品逻辑

显示的物品在`items:`部分定义。

- 物品可以添加条件决定其是否显示。
- 物品支持的点击事件：`left-click`（左键点击），`right-click`（右键点击），`middle-click`（中键点击），`shift-left-click`（shift+左键点击），`shift-right-click`（shift+右键点击）。
- 与其他面板类型一样，你可以使用`actions`来设置操作，它会响应所有类型的点击事件。
- 每种点击类型都可配置独立的命令操作：`commands`（命令）、`requirements`（需求）和`fail`（失败）消息。

你只需要在物品中**定义一次**逻辑，之后即可在`layout:`中随时复用。

------

## 玩家物品栏行为

- 玩家在打开面板后，仍可在他们自身的物品栏中操作自己的物品。
- 玩家可以将自己的物品放入面板的**空槽位**中。
- 这些槽位对玩家而言，与正常状态下的物品栏一致。
- 面板自身的物品是**受到保护**的，不能被取出和移动。
- 如果面板关闭，玩家的物品还在面板内，那么这些物品会**掉在地上**。

这种有限度的交互非常适合用于交易界面、物品筛选器等场景。

------

:::tip[逻辑优先级]

槽位可以引用多个物品名称。插件会`从上到下`逐一判定，**第一个匹配的物品**将会显示。

:::

:::tip[物品交互用箱子，表单就用对话框]

若要实现**物品交互**或**动态界面**，箱子面板更好。若要使用**表单组件**（例如按钮、滑块或文本框），最好选用对话框。

:::